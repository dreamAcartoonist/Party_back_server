webpackJsonp([13],{Wj1x:function(e,t){},vnEc:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("Dd8w"),i=a.n(o),s={name:"",data:function(){return{tableData:[],FormVisible:!1,formData:{img:"",examine:"",reason:""},multiSelection:[],userId:[],pageSize:5,page:1,total:10}},methods:{getSummary:function(){var e=this;this.$axios.get("getReports",{type:1}).then(function(t){e.tableData=t.data})},edit:function(e){var t=this;this.$router.push({path:"/summary",query:{id:e}}),this.$axios.get("getReports",{id:this.$route.query.id}).then(function(e){t.formData=e.data})},updateSummary:function(){var e=this,t=i()({},this.formData,{id:this.$route.query.id});this.$axios.post("updateReports",t).then(function(t){200==t.code?e.$message({message:""+t.msg,type:"success"}):e.$message({message:""+t.msg,type:"warning"}),e.FormVisible=!1,setTimeout(function(){e.$router.push("/summary"),e.$router.go(0)},1e3)})},del:function(e){var t=this;this.$confirm("此操作将永久删除该内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.post("delReports",{id:e}).then(function(e){200==e.code?(t.$message({type:"success",message:"删除成功!"}),setTimeout(function(){t.$router.go(0)},1e3)):t.$message({type:"error",message:"删除失败!"})})}).catch(function(){t.$message({type:"warning",message:"已取消删除"})})},selectionChange:function(e){this.multiSelection=e},toggleSelection:function(e){var t=this;if(e){for(var a in e)this.userId.push(e[a]._id);this.$axios.post("updateManyPwd",{userId:this.userId}).then(function(e){200==e.code&&t.$message({type:"success",message:"批量修改成功"})})}else this.$message({type:"warning",message:"没有选择"})},formatter:function(e){return e+(this.page-1)*this.pageSize+1},pageChange:function(e){var t=this;this.page=e,this.$axios.get("getReports",{page:e,pageSize:this.pageSize,type:1}).then(function(e){t.tableData=e.data})},getNumber:function(){var e=this;this.$axios.get("getReportsNum",{type:1}).then(function(t){e.total=t.data})}},created:function(){this.getSummary(),this.getNumber()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list"},[a("el-main",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.selectionChange}},[a("el-table-column",{attrs:{prop:"select",label:"",width:"50","show-overflow-tooltip":"",type:"selection"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"#",type:"index",index:e.formatter,width:"50","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"examine",label:"状态",width:"150","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==e.examine?a("el-tag",{attrs:{type:"success"}},[e._v("通过")]):e._e(),e._v(" "),2==e.examine?a("el-tag",{attrs:{type:"danger"}},[e._v("未通过")]):e._e(),e._v(" "),0==e.examine?a("el-tag",{attrs:{type:"info"}},[e._v("未审核")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"reason",label:"理由",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.edit(t.row._id),e.FormVisible=!0}}},[e._v("查看")]),e._v(" "),a("el-dialog",{attrs:{title:"审核",visible:e.FormVisible},on:{"update:visible":function(t){e.FormVisible=t}}},[a("el-form",{attrs:{model:e.formData}},[a("el-form-item",{attrs:{label:""}},[a("img",{staticClass:"avatar",attrs:{src:e.formData.img}})]),e._v(" "),a("el-form-item",[a("el-radio",{attrs:{label:"1"},model:{value:e.formData.examine,callback:function(t){e.$set(e.formData,"examine",t)},expression:"formData.examine"}},[e._v("通过")]),e._v(" "),a("el-radio",{attrs:{label:"2"},model:{value:e.formData.examine,callback:function(t){e.$set(e.formData,"examine",t)},expression:"formData.examine"}},[e._v("不通过")]),e._v(" "),a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入理由"},model:{value:e.formData.reason,callback:function(t){e.$set(e.formData,"reason",t)},expression:"formData.reason"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.updateSummary}},[e._v("提交")])],1)],1),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.del(t.row._id)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-footer",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.toggleSelection(e.multiSelection)}}},[e._v("批量重置密码")]),e._v(" "),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next,jumper",total:e.total,"current-page":e.page,"page-size":e.pageSize},on:{"current-change":e.pageChange}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,n,!1,function(e){a("Wj1x")},null,null);t.default=r.exports}});
//# sourceMappingURL=13.f90d8d79a75dde6ecd3f.js.map