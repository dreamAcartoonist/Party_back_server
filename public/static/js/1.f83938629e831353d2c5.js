webpackJsonp([1],{PvM1:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={name:"perSummary",data:function(){return{branchId:"",tableData:[],value:"",options:[],FormVisible:!1,formData:{pic:""},disabled:!0,dialogTableData:[],pageSize:5,page:1,total:5}},methods:{findBranchName:function(){var t=this;this.$axios.get("getBranch").then(function(e){t.options=e.data})},getUsers:function(){var t=this;this.$axios.get("getUsers").then(function(e){t.tableData=e.data})},getBranchUser:function(t){var e=this;this.branchId=t,this.$axios.get("getUsersNum",{branchId:t}).then(function(t){e.total=t.data}),this.$axios.get("getBranchUser",{branchId:t}).then(function(t){e.tableData=t.data})},look:function(t){var e=this;this.$axios.get("getPerSummary",{id:t,branchId:this.branchId,reviewId:this.$route.query.id}).then(function(t){e.formData=t.data,e.dialogTableData=t.data.common})},del:function(t){var e=this;this.$confirm("此操作将永久删除该内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.post("delPerSummary",{id:t}).then(function(t){200==t.code?(e.$message({type:"success",message:"删除成功!"}),setTimeout(function(){e.$router.go(0)},1e3)):e.$message({type:"error",message:"删除失败!"})})}).catch(function(){e.$message({type:"warning",message:"已取消删除"})})},formatter:function(t){return t+(this.page-1)*this.pageSize+1},pageChange:function(t){var e=this;this.page=t,this.$axios.get("getUsers",{page:t,pageSize:this.pageSize}).then(function(t){e.tableData=t.data})},getNumber:function(){var t=this;this.$axios.get("getUsersNum").then(function(e){t.total=e.data})}},created:function(){this.findBranchName(),this.getUsers(),this.getNumber()}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"perSummary"},[a("el-header",[a("el-select",{attrs:{filterable:"",placeholder:"请选择类型"},on:{change:t.getBranchUser},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t._id,attrs:{label:t.branchName,value:t._id}})})),t._v(" "),a("el-dropdown",[a("i",{staticClass:"el-icon-setting",staticStyle:{"margin-right":"15px"}}),t._v(" "),a("span",[t._v("设置")]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[t._v("查看")]),t._v(" "),a("el-dropdown-item",[t._v("新增")]),t._v(" "),a("el-dropdown-item",[t._v("删除")])],1)],1)],1),t._v(" "),a("el-main",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"",label:"#",type:"index",index:t.formatter,width:"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"300","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"branchName",label:"党支部名称",width:"300","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){t.FormVisible=!0,t.look(e.row._id)}}},[t._v("查看")]),t._v(" "),a("el-dialog",{attrs:{title:"个人总结及评论详情",visible:t.FormVisible,width:"80%"},on:{"update:visible":function(e){t.FormVisible=e}}},[a("el-form",{attrs:{model:t.formData}},[a("el-form-item",{attrs:{label:"个人总结"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://upload-z1.qiniup.com",disabled:t.disabled}},[t.formData.pic?a("img",{staticClass:"avatar",attrs:{src:t.formData.pic}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),a("el-table",{attrs:{data:t.dialogTableData}},[a("el-table-column",{attrs:{prop:"",label:"#",type:"index",index:t.formatter,"show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"评议人","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"branchName",label:"党支部","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"评分","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.content?a("el-tag",{attrs:{type:"success"}},[t._v("优")]):t._e(),t._v(" "),1==e.row.content?a("el-tag",{attrs:{type:"primary"}},[t._v("良")]):t._e(),t._v(" "),2==e.row.content?a("el-tag",{attrs:{type:"warning"}},[t._v("中")]):t._e(),t._v(" "),3==e.row.content?a("el-tag",{attrs:{type:"danger"}},[t._v("差")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:50}})],1)],1),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.del(e.row._id)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("el-footer",[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next,jumper",total:t.total,"current-page":t.page,"page-size":t.pageSize},on:{"current-change":t.pageChange}})],1)],1)},staticRenderFns:[]};var r=a("VU/8")(o,n,!1,function(t){a("owA2"),a("zYrN")},null,null);e.default=r.exports},owA2:function(t,e){},zYrN:function(t,e){}});
//# sourceMappingURL=1.f83938629e831353d2c5.js.map